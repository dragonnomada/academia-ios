# Módulo 211. Diseño orientado al protocolo

## Tema: Diseño basado en protocolos

    Requisitos
    Diseño orientado a objetos
    Diseño orientado al protocolo

### Conceptos clave

El diseño orientado a objetos implica pensar en implementar sistemas que a través objetos apliquen funcionalidad y retengan datos.

Por otro lado en el diseño orientado a protocolos nos basamos en implementar la funcionalidad que pueda ocurrir en diversas operaciones en el sistema.

Por ejemplo, para un sistema de pago de productos, en el diseño orientado a objetos podríamos establecer clases que diseñen o aproximen terminales de pago o cajas de cobro, como: `TerminalPago`, `CajaCobro`, `CajeroPago`, etc.

Sin embargo, para el mismo sistema de pago de productos, en el diseño orientado a protocolos podríamos establecer protocolos que diseñen cada funcionalidad en las operaciones de pago, como: `EmisorPagoProtocol`, `ReceptorPagoProtocol`, `ReportadorPagoProtocol`.

El diseño orientado a protocolos sirve para directamente mandar a implementar funcionalidades que sean requeridas en el sistema, algunas de las cuáles podrían ser implementadas de otras formas en el futuro.

### Analogía

El diseño orientado a objetos limita nuestro código a las clases y objetos que estemos definiendo, y nos impide tener una visión clara de lo que ocurre en nuestro sistema.

En el diseño orientado a protocolos, generalmente definimos funcionalidades atómicas o unitarias que nos dan una visión de todo lo que se puede hacer en el sistema, sin limitarnos a crear una implementación específica.

### Ejemplo



### Ejercicios

## Tema: Herencia de protocolos

    Herencia de protocolo
    Composición del protocolo
    Diseño orientado al protocolo: poniéndolo todo junto

### Conceptos clave

### Analogía

### Ejemplo

> Ejemplo de herencia de funcionalidad en protocolos a través de extensiones

```swift
protocol Pagable {
    var monto: Double { get }
    var montoConIva: Double { get }
    func pagar()
}

extension Pagable {
    var montoConIva: Double {
        get { monto * 1.16 }
    }
}

struct Libro: Pagable {
    var monto: Double
    func pagar() {
        print("Se pagará un libro de $\(self.montoConIva))")
    }
}

let libro = Libro(monto: 14)

libro.pagar()
```

### Ejercicios

## Tema: Tópicos de protocolos

    Uso de la instrucción where con protocolos
    Estructuras versus clases

### Conceptos clave

### Analogía

### Ejemplo

> Ejemplo de una lista de objetos funcionales que usan `where` para filtrar un protocolo

```swift
protocol Animal {
    var nombre: String { get set }
    func describir() -> String
}

protocol Aereo: Animal {
    func volar()
}

protocol Terrestre: Animal {
    func caminar()
}

protocol Acuatico: Animal {
    func nadar()
}

struct Pajaro: Aereo {
    // ...
}

struct Aguila: Aereo {
    // ...
}

struct Conejo: Terrestre {
    // ...
}

struct Leon: Terrestre {
    // ...
}

struct Delfin: Acuatico {
    // ...
}

struct Pulpo: Acuatico {
    // ...
}

var animales: [Animal] = [] // = [Animal]()

animales.append(Pajaro())
animales.append(Aguila())
animales.append(Conejo())
animales.append(Leon())
animales.append(Delfin())
animales.append(Pulpo())

for animal in animales where animal is Aereo {
    (animal as! Aereo).volar()
}

for animal in animales where animal is Terrestre {
    (animal as! Terrestre).caminar()
}

for animal in animales where animal is Acuatico {
    (animal as! Acuatico).nadar()
}
```

### Ejercicios

---

## Comentarios

## Referencias

Enlace | Descripción
--- | ---
[https://docs.swift.org/swift-book/LanguageGuide/Protocols.html](https://docs.swift.org/swift-book/LanguageGuide/Protocols.html) | Protocolos
