# Módulo 10. Protocolos y extensiones de protocolo

Por [Alan Badillo Salas](https://www.nomadacode.com)

## Tema: Profundizando sobre los protocolos

Protocolos como tipos
Polimorfismo con protocolos
Typecasting con protocolos
Extensiones de protocolo

### Conceptos clave

Los protocolos generan *objetos funcionales* que se limitan a la definición del protocolo, para usarlos se hace un `Typecasting` entre la clase o estructura que implementa el protocolo y el protocolo mismo. Esto permite transformar el objeto de entidad al objeto funcional de un protocolo.

Si queremos que una clase o estructura que actualmente no implementa un protocolo lo haga, podemos crear una extensión para definir esa implementación.

### Analogía

Vamos a pensar los protocolos como caparazones o armaduras que le podemos poner a un guerrero (héroe).

Un espadachín sería un héroe con el protocolo `EspadachinProtocol` que le pida su tipo de espada y el método `blandir()`.

Un arquero sería un héroe con el protocolo `ArqueroProtocol` que le pida su tipo de arco, la cantidad de flechas y el método `disparar()`.

### Ejemplo

> Ejemplo de un héroe genérico

```swift
struct Heroe {
    var nombre: String
    var salud: Int
    func tomarPosicion() {
        self.salud += 50
    }
}

protocol EspadachinProtocol {
    var pesoEspada: Double {get}  
    var velocidadBlandido: Double {get}
    func blandir()
    func atacar(enemigo: Enemigo)
}

protocol ArqueroProtocol {
    var longitudArco: Double {get}
    var tensionArco: Double {get}
    func apuntar()
    func disparar()
}

extension Heroe: EspadachinProtocol {
    var pesoEspada: Double = 1.4
    var velocidadBlandido: Double = 0.8
    var estaBlandida: Bool = false
    func blandir() {
        estaBlandida = !estaBlandida
    }
    func atacar(enemigo: Enemigo) {
        enemigo.bajarSalud(self.pesoEspada * self.velocidadBlandido)
    }
}

var heroPepe = Heroe(nombre: "Pepe", salud: 100)

heroPepe.blandir()

heroPepe.atacar(e1)
heroPepe.atacar(e1)
heroPepe.atacar(e1)

// Typecasting -> Un objeto/instancia se transforma en un objeto-protocolo
var espadachin1 : EspadachinProtocol = heroPepe

espadachin1.blandir()
espadachin1.atacar(e2)

// Downcasting -> Recuperamos el objeto inicial
((Heroe)espachin1).tomarPosicion()
```

### Ejercicios

> `[E21001]` - Crear un protocolo llamado `EncendibleProtocol` con la propiedad `encendido: Bool` y los métodos `encender()` y `apagar()`

> `[E21002]` - Crear una clase o estructura llamada `Lavadora` que implemente la funcionalidad de `EncendibleProtocol`

> `[E21003]` - Crear una clase o estructura llamada `Licuadora` que implemente la funcionalidad de `EncendibleProtocol` a través de una extensión

# Tema: Protocolos y buenas prácticas

¿Necesito usar protocolos?
Adopción de protocolos usando una implementación sintetizada
Biblioteca estándar de Swift

### Conceptos clave

### Analogía

### Ejemplo

### Ejercicios

---

## Comentarios

## Referencias